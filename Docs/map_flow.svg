<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="680" viewBox="0 0 900 680">
  <style>
    .box { fill:#1f2937; stroke:#0ea5a4; stroke-width:2; rx:10; ry:10; }
    .text { font: 16px Verdana, Arial, sans-serif; fill:#ffffff; }
    .arrow { stroke:#0ea5a4; stroke-width:2; fill:none; marker-end: url(#arrowhead); }
    .note { font:14px Verdana, Arial, sans-serif; fill:#374151; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#0ea5a4" />
    </marker>
  </defs>

  <!-- Boxes -->
  <rect x="280" y="20" width="340" height="58" class="box"/>
  <text x="450" y="58" text-anchor="middle" alignment-baseline="middle" class="text">Main Thread: Update</text>

  <rect x="280" y="110" width="340" height="58" class="box"/>
  <text x="450" y="148" text-anchor="middle" alignment-baseline="middle" class="text">RequestMapData</text>

  <rect x="280" y="200" width="340" height="58" class="box"/>
  <text x="450" y="238" text-anchor="middle" alignment-baseline="middle" class="text">New Worker Thread</text>

  <rect x="220" y="290" width="460" height="58" class="box"/>
  <text x="450" y="328" text-anchor="middle" alignment-baseline="middle" class="text">GenerateMapData (calculate noise)</text>

  <rect x="220" y="380" width="460" height="58" class="box"/>
  <text x="450" y="418" text-anchor="middle" alignment-baseline="middle" class="text">Lock & Enqueue â†’ mapDataThreadInfoQueue</text>

  <rect x="280" y="470" width="340" height="58" class="box"/>
  <text x="450" y="508" text-anchor="middle" alignment-baseline="middle" class="text">Main Thread: Execute Callback</text>

  <rect x="280" y="560" width="340" height="58" class="box"/>
  <text x="450" y="598" text-anchor="middle" alignment-baseline="middle" class="text">Render Mesh/Texture</text>

  <!-- Arrows -->
  <path d="M450 78 L450 110" class="arrow" />
  <path d="M450 168 L450 200" class="arrow" />
  <path d="M450 258 L450 290" class="arrow" />
  <path d="M450 348 L450 380" class="arrow" />
  <path d="M450 438 L450 470" class="arrow" />
  <path d="M450 528 L450 560" class="arrow" />

  <!-- Note -->
  <text x="20" y="640" class="note">Note: If your Markdown preview doesn't render Mermaid, the diagram below shows the same process as the Mermaid flowchart.</text>
</svg>